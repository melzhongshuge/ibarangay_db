<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Residency Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f8f9fa;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        h2 {
            background-color: #e2e6ea;
            padding: 10px 15px;
            border-radius: 4px;
            border: 1px solid #cfd8dd;
            margin-top: 25px;
        }
        form {
            background: white;
            padding: 20px 25px;
            border-radius: 6px;
            border: 1px solid #cfd8dd;
            max-width: 900px;
            margin: 0 auto;
        }
        .section {
            margin-bottom: 30px;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        .row > div {
            flex: 1 1 220px;
            min-width: 220px;
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: 600;
            margin-bottom: 5px;
        }
        input[type="text"],
        input[type="number"],
        input[type="date"],
        input[type="email"],
        input[type="tel"],
        select,
        textarea {
            padding: 7px 10px;
            font-size: 0.9rem;
            border: 1px solid #b0b7bd;
            border-radius: 3px;
            transition: border-color 0.25s;
        }
        input[type="text"]:focus,
        input[type="number"]:focus,
        input[type="date"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #007bff;
        }
        .required::after {
            content: " *";
            color: red;
        }
        small.note {
            font-size: 0.85rem;
            color: #a94442;
            margin-top: 5px;
            font-weight: 600;
        }
        button {
            background-color: #007bff;
            border: none;
            padding: 10px 20px;
            color: white;
            font-weight: 700;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .hidden {
            display: none;
        }
        .checkbox-options {
            margin-bottom: 20px;
        }
        .file-input-container {
            position: relative;
        }
        .file-name {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }
        @media (max-width: 700px) {
            .row > div {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
<div class="form-container">
    <div class="checkbox-options">
        <div class="checkbox-option">
            <input type="radio" id="residencyRadio" name="request_type" value="residency" onchange="showForm()">
            <label for="residencyRadio">Residency Certificate</label>
        </div>
        <div class="checkbox-option">
            <input type="radio" id="barangayRadio" name="request_type" value="barangay" onchange="showForm()">
            <label for="barangayRadio">Barangay ID</label>
        </div>
    </div>
    
    <!-- Residency Certificate Form -->
    <form id="residentForm" class="hidden" action="javascript:void(0);">
        <img src="https://app.bploparanaque.com/safetyseal/images/logo.png" alt="City Seal" class="logo" width="50" height="auto">
        <h1 style="text-align: center;">RESIDENCY CERTIFICATE APPLICATION</h1>
        <p style="text-align: center;">Fill out all required fields completely and accurately</p>

        <!-- Personal Information Section -->
        <section class="section" id="personalInfo">
            <h2>Personal Information</h2>
            <div class="row">
                <div>
                    <label for="res_LastName" class="required">Last Name</label>
                    <input type="text" id="res_LastName" name="res_LastName" required>
                </div>
                <div>
                    <label for="res_MiddleName">Middle Name</label>
                    <input type="text" id="res_MiddleName" name="res_MiddleName">
                </div>
                <div>
                    <label for="res_FirstName" class="required">First Name</label>
                    <input type="text" id="res_FirstName" name="res_FirstName" required>
                </div>
                <div>
                    <label for="res_DateOfBirth" class="required">Date of Birth</label>
                    <input type="date" id="res_DateOfBirth" name="res_DateOfBirth" required>
                </div>
                <div>
                    <label for="res_PlaceOfBirth" class="required">Place of Birth</label>
                    <input type="text" id="res_PlaceOfBirth" name="res_PlaceOfBirth" required>
                </div>
                <div>
                    <label for="res_CountryOfBirth" class="required">Country of Birth</label>
                    <input type="text" id="res_CountryOfBirth" name="res_CountryOfBirth" required>
                </div>
                <div>
                    <label for="res_Sex" class="required">Sex</label>
                    <select id="res_Sex" name="res_Sex" required>
                        <option value="">Choose</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div>
                    <label for="res_CivilStatus" class="required">Civil Status</label>
                    <select id="res_CivilStatus" name="res_CivilStatus" required>
                        <option value="">Choose</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Widowed">Widowed</option>
                        <option value="Annulled">Annulled</option>
                    </select>
                </div>
                <div>
                    <label for="res_BloodType">Blood Type</label>
                    <select id="res_BloodType" name="res_BloodType">
                        <option value="">Choose</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                    </select>
                </div>
                <div>
                    <label for="res_CurrentNationality" class="required">Current Nationality</label>
                    <input type="text" id="res_CurrentNationality" name="res_CurrentNationality">
                </div>
                <div>
                    <label for="res_OriginalNationality">Original Nationality</label>
                    <input type="text" id="res_OriginalNationality" name="res_OriginalNationality">
                </div>
            </div>
        </section>

        <!-- Address Information Section -->
        <section class="section" id="addressInfo">
            <h2>Address Information</h2>
            <div class="row">
                <div>
                    <label for="res_HouseNumber" class="required">House/Building Number</label>
                    <input type="text" id="res_HouseNumber" name="res_HouseNumber">
                </div>
                <div>
                    <label for="res_Street" class="required">Street</label>
                    <input type="text" id="res_Street" name="res_Street">
                </div>
                <div>
                    <label for="res_Subdivision">Subdivision/Village</label>
                    <input type="text" id="res_Subdivision" name="res_Subdivision">
                </div>
                <div>
                    <label for="res_Barangay" class="required">Barangay</label>
                    <input type="text" id="res_Barangay" name="res_Barangay">
                </div>
                <div>
                    <label for="res_CityMunicipality" class="required">City/Municipality</label>
                    <input type="text" id="res_CityMunicipality" name="res_CityMunicipality">
                </div>
                <div>
                    <label for="res_Province" class="required">Province</label>
                    <input type="text" id="res_Province" name="res_Province">
                </div>
                <div>
                    <label for="res_PostalCode">Postal Code</label>
                    <input type="text" id="res_PostalCode" name="res_PostalCode">
                </div>
                <div>
                    <label for="res_Country">Country</label>
                    <input type="text" id="res_Country" name="res_Country">
                </div>
                <div>
                    <label for="res_LengthOfStay" class="required">Length of Stay (years)</label>
                    <input type="text" id="res_LengthOfStay" name="res_LengthOfStay">
                </div>
            </div>
        </section>

        <!-- Contact Information Section -->
        <section class="section" id="contactInfo">
            <h2>Contact Information</h2>
            <div class="row">
                <div>
                    <label for="res_ContactDetails" class="required">Contact Number</label>
                    <input type="tel" id="res_ContactDetails" name="res_ContactDetails" placeholder="Mobile/Phone Number">
                </div>
                <div>
                    <label for="res_EmailAddress">Email Address</label>
                    <input type="email" id="res_EmailAddress" name="res_EmailAddress">
                </div>
                <div>
                    <label for="res_EmergencyContact">Emergency Contact</label>
                    <textarea id="res_EmergencyContact" name="res_EmergencyContact" rows="1"></textarea>
                </div>
            </div>
        </section>

        <!-- Household Information Section -->
        <section class="section" id="householdInfo">
            <h2>Household Information</h2>
            <div class="row">
                <div style="flex: 2;">
                    <label for="res_HouseholdDetails">Household Members</label>
                    <textarea id="res_HouseholdDetails" name="res_HouseholdDetails" rows="4" placeholder="List all household members with their relationship to you"></textarea>
                </div>
            </div>
        </section>

        <!-- Community & Health Section -->
        <section class="section" id="communityHealth">
            <h2>Community & Health</h2>
            <div class="row">
                <div>
                    <label for="res_BarangayInvolvement">Barangay Involvement</label>
                    <textarea id="res_BarangayInvolvement" name="res_BarangayInvolvement" rows="3" placeholder="List any community organizations, committees, or activities you're involved in"></textarea>
                </div>
                <div>
                    <label for="res_MedicalConditions">Medical Conditions</label>
                    <textarea id="res_MedicalConditions" name="res_MedicalConditions" rows="3" placeholder="List any known medical conditions, allergies, or special needs"></textarea>
                </div>
            </div>
        </section>

        <!-- Proof of Residency Documents -->
        <section class="section" id="documentSection">
            <h2>Required Documents</h2>
            <div class="row">
                <div>
                    <label for="res_ValidID" class="required">Valid Government ID</label>
                    <div class="file-input-container">
                        <input type="file" id="res_ValidID" name="res_ValidID" accept="image/*,.pdf">
                    </div>
                    <small class="note">(Passport, Driver's License, UMID, etc.)</small>
                </div>
                <div>
                    <label for="res_ProofOfResidency" class="required">Proof of Residency</label>
                    <div class="file-input-container">
                        <input type="file" id="res_ProofOfResidency" name="res_ProofOfResidency" accept="image/*,.pdf">
                    </div>
                    <small class="note">(Utility bill, lease agreement, etc.)</small>
                </div>
                <div>
                    <label for="res_BarangayClearance" class="required">Barangay Clearance</label>
                    <div class="file-input-container">
                        <input type="file" id="res_BarangayClearance" name="res_BarangayClearance" accept="image/*,.pdf">
                    </div>
                </div>
            </div>
        </section>

        <!-- Declaration -->
        <section class="section">
            <div>
                <label class="required"><input type="checkbox" id="res_declaration" name="res_declaration"> I hereby certify that I am a resident of the barangay and that all information provided in this application is true and correct to the best of my knowledge. I understand that any false information may result in disqualification of my application or revocation of my residency certification.</label>
            </div>
        </section>

        <div class="mt-8 flex justify-end space-x-4">
            <button type="reset">Reset Form</button>
            <button type="submit">Submit Information</button>
        </div>
    </form>

<!-- ---------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------------------------------------------------------------------------------------------------- -->

    <!-- Barangay ID Form -->
    <form id="barangayIDForm" class="hidden" action="javascript:void(0);">
        <img src="https://app.bploparanaque.com/safetyseal/images/logo.png" alt="City Seal" class="logo" width="50" height="auto">
        <h1 style="text-align: center;">BARANGAY IDENTIFICATION CARD APPLICATION</h1>
        <p style="text-align: center;">Fill out all required fields completely and accurately</p>

        <!-- Personal Information Section -->
        <section class="section" id="personalInfo">
            <h2>Personal Information</h2>
            <div class="row">
                <div>
                    <label for="bar_LastName" class="required">Last Name</label>
                    <input type="text" id="bar_LastName" name="bar_LastName">
                </div>
                <div>
                    <label for="bar_MiddleName">Middle Name</label>
                    <input type="text" id="bar_MiddleName" name="bar_MiddleName">
                </div>
                <div>
                    <label for="bar_FirstName" class="required">First Name</label>
                    <input type="text" id="bar_FirstName" name="bar_FirstName">
                </div>
                <div>
                    <label for="bar_DateOfBirth" class="required">Date of Birth</label>
                    <input type="date" id="bar_DateOfBirth" name="bar_DateOfBirth">
                </div>
                <div>
                    <label for="bar_PlaceOfBirth" class="required">Place of Birth</label>
                    <input type="text" id="bar_PlaceOfBirth" name="bar_PlaceOfBirth">
                </div>
                <div>
                    <label for="bar_Age" class="required">Age</label>
                    <input type="number" id="bar_Age" name="bar_Age">
                </div>
                <div>
                    <label for="bar_Sex" class="required">Sex</label>
                    <select id="bar_Sex" name="bar_Sex">
                        <option value="">Choose</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div>
                    <label for="bar_CivilStatus" class="required">Civil Status</label>
                    <select id="bar_CivilStatus" name="bar_CivilStatus">
                        <option value="">Choose</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Widowed">Widowed</option>
                        <option value="Annulled">Annulled</option>
                    </select>
                </div>
                <div>
                    <label for="bar_citizenship" class="required">Citizenship</label>
                    <input type="text" id="bar_citizenship" name="bar_citizenship">
                </div>
                <div>
                    <label for="bar_eyeColor">Eye Color</label>
                    <input type="text" id="bar_eyeColor" name="bar_eyeColor">
                </div>
                <div>
                    <label for="bar_height">Height (cm)</label>
                    <input type="number" id="bar_height" name="bar_height">
                </div>
                <div>
                    <label for="bar_weight">Weight (kg)</label>
                    <input type="number" id="bar_weight" name="bar_weight">
                </div>
                <div>
                    <label for="bar_BloodType">Blood Type</label>
                    <select id="bar_BloodType" name="bar_BloodType">
                        <option value="">Choose</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                    </select>
                </div>
                <div>
                    <label for="bar_TypeOfResidency" class="required">Type of Residency</label>
                    <select id="bar_TypeOfResidency" name="bar_TypeOfResidency">
                        <option value="">Choose</option>
                        <option value="Homeowner">Homeowner</option>
                        <option value="Renter">Renter</option>
                        <option value="Boarder">Boarder</option>
                        <option value="Tenant">Tenant</option>
                    </select>
                </div>
                <div>
                    <label for="bar_DateOfRegistration">Date of Registration</label>
                    <input type="date" id="bar_DateOfRegistration" name="bar_DateOfRegistration">
                </div>
            </div>
        </section>

        <!-- Identification Numbers Section -->
        <section class="section" id="identification">
            <h2>Identification Numbers</h2>
            <div class="row">
                <div>
                    <label for="bar_TinNo">TIN No</label>
                    <input type="text" id="bar_TinNo" name="bar_TinNo">
                </div>
                <div>
                    <label for="bar_SSSNo">SSS No</label>
                    <input type="text" id="bar_SSSNo" name="bar_SSSNo">
                </div>
                <div>
                    <label for="bar_GSISNo">GSIS No</label>
                    <input type="text" id="bar_GSISNo" name="bar_GSISNo">
                </div>
                <div>
                    <label for="bar_PhilHealthNo">PhilHealth No</label>
                    <input type="text" id="bar_PhilHealthNo" name="bar_PhilHealthNo">
                </div>
                <div>
                    <label for="bar_PagibigNo">Pag-IBIG No</label>
                    <input type="text" id="bar_PagibigNo" name="bar_PagibigNo">
                </div>
                <div>
                    <label for="bar_HMDFNo">HMDF No</label>
                    <input type="text" id="bar_HMDFNo" name="bar_HMDFNo">
                </div>
            </div>
        </section>

        <!-- Address Information Section -->
        <section class="section" id="addressInfo">
            <h2>Address Information</h2>
            <div class="row">
                <div>
                    <label for="bar_HouseNo" class="required">House No</label>
                    <input type="text" id="bar_HouseNo" name="bar_HouseNo">
                </div>
                <div>
                    <label for="bar_Street" class="required">Street</label>
                    <input type="text" id="bar_Street" name="bar_Street">
                </div>
                <div>
                    <label for="bar_Subdivision">Subdivision/Village</label>
                    <input type="text" id="bar_Subdivision" name="bar_Subdivision">
                </div>
                <div>
                    <label for="bar_PrecinctNo" class="required">Precinct No</label>
                    <input type="text" id="bar_PrecinctNo" name="bar_PrecinctNo">
                </div>
                <div>
                    <label for="bar_VRRNo">VRR No</label>
                    <input type="text" id="bar_VRRNo" name="bar_VRRNo">
                </div>
                <div>
                    <label for="bar_PostalCode">Postal Code</label>
                    <input type="text" id="bar_PostalCode" name="bar_PostalCode">
                </div>
                <div>
                    <label for="bar_barangay" class="required">Barangay</label>
                    <input type="text" id="bar_barangay" name="bar_barangay">
                </div>
                <div>
                    <label for="bar_city" class="required">City</label>
                    <input type="text" id="bar_city" name="bar_city">
                </div>
            </div>
        </section>

        <!-- Emergency Contact Section -->
        <section class="section" id="emergencyContact">
            <h2>Emergency Contact</h2>
            <div class="row">
                <div>
                    <label for="bar_EmergencyContactName">Name</label>
                    <input type="text" id="bar_EmergencyContactName" name="bar_EmergencyContactName">
                </div>
                <div>
                    <label for="bar_EmergencyContactRelation">Relation</label>
                    <input type="text" id="bar_EmergencyContactRelation" name="bar_EmergencyContactRelation" required placeholder="Relation to you">
                </div>
                <div>
                    <label for="bar_EmergencyContactNumber">Contact Number</label>
                    <input type="tel" id="bar_EmergencyContactNumber" name="bar_EmergencyContactNumber">
                </div>
            </div>
        </section>

        <!-- Photo and Documents Section -->
        <section class="section">
            <h2>Photo and Document Requirements</h2>
            <div class="row">
                <div>
                    <label for="bar_idPhoto" class="required">2x2 ID Photo (White Background)</label>
                    <div class="file-input-container">
                        <input type="file" id="bar_idPhoto" name="bar_idPhoto" accept="image/*,.pdf">
                    </div>
                </div>
                <div>
                    <label for="bar_signature" class="required">Signature File (Digital or Scanned)</label>
                    <div class="file-input-container">
                        <input type="file" id="bar_signature" name="bar_signature" accept="image/*,.pdf">
                    </div>
                </div>
            </div>
            <small class="note">NOTE: Photos must be clear, recent, and with full face view (without sunglasses or hat).</small>
        </section> 
        
        <!-- Supporting Documents Section -->
        <section class="section">
            <h2>Supporting Documents</h2>
            <div class="row">
                <div>
                    <label for="bar_ValidID" class="required">Valid Government ID</label>
                    <div class="file-input-container">
                        <input type="file" id="bar_ValidID" name="bar_ValidID" accept="image/*,.pdf">
                    </div>
                    <small class="note">(Passport, Driver's License, UMID, etc.)</small>
                </div>
                <div>
                    <label for="bar_ProofOfResidency" class="required">Proof of Residency</label>
                    <div class="file-input-container">
                        <input type="file" id="bar_ProofOfResidency" name="bar_ProofOfResidency" accept="image/*,.pdf">
                    </div>
                    <small class="note">(Utility bill, lease agreement, etc.)</small>
                </div>
            </div>
        </section>

        <!-- Declaration -->
        <section class="section">
            <div>
                <label class="required"><input type="checkbox" id="bar_declaration" name="bar_declaration">I hereby certify that all information provided in this application is true and correct to the best of my knowledge. I understand that any false information may result in disqualification of my application or revocation of my barangay ID.</label>
            </div>
        </section>

        <div class="mt-8 flex justify-end space-x-4">
            <button type="reset">Reset Form</button>
            <button type="submit">Submit Information</button>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('residentForm').classList.add('hidden');
        document.getElementById('barangayIDForm').classList.add('hidden');
    });

    function showForm() {
        const residentForm = document.getElementById('residentForm');
        const barangayForm = document.getElementById('barangayIDForm');
        const selectedOption = document.querySelector('input[name="request_type"]:checked')?.value;

        residentForm.classList.add('hidden');
        barangayForm.classList.add('hidden');

        if (selectedOption === 'residency') {
            residentForm.classList.remove('hidden');
        } else if (selectedOption === 'barangay') {
            barangayForm.classList.remove('hidden');
        }
    }

    document.querySelectorAll('input[type="file"]').forEach(input => {
        input.addEventListener('change', function(e) {
            const fileNameSpan = this.parentElement.querySelector('.file-name');
            fileNameSpan.textContent = e.target.files[0] ? e.target.files[0].name : 'No file chosen';
        });
    });

    function validateForm(formId) {
        const form = document.getElementById(formId);
        const requiredFields = form.querySelectorAll('[required]');
        let isValid = true;

        requiredFields.forEach(field => {
            if (!field.value || (field.type === 'checkbox' && !field.checked)) {
                isValid = false;
                field.style.borderColor = field.type === 'checkbox' ? 'none' : 'red';
                if (field.type === 'checkbox') {
                    field.parentElement.style.color = 'red';
                }
            } else {
                field.style.borderColor = field.type === 'checkbox' ? 'none' : '#b0b7bd';
                if (field.type === 'checkbox') {
                    field.parentElement.style.color = '#333';
                }
            }
        });

        return isValid;
    }

document.getElementById('residentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    if (validateForm('residentForm')) {
        const formData = new FormData(this);
        fetch('/submit-residency', {
            method: 'POST',
            body: formData
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => alert(data.message || 'Residency Certificate form submitted successfully!'))
            .catch(error => alert('Submission failed: ' + error.message));
    } else {
        alert('Please fill out all required fields and agree to the declaration.');
    }
});

document.getElementById('barangayIDForm').addEventListener('submit', function(e) {
    e.preventDefault();
    if (validateForm('barangayIDForm')) {
        const formData = new FormData(this);
        fetch('/submit-barangayID', {
            method: 'POST',
            body: formData
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => alert(data.message || 'Barangay ID form submitted successfully!'))
            .catch(error => alert('Submission failed: ' + error.message));
    } else {
        alert('Please fill out all required fields and agree to the declaration.');
    }
});
</script>
</body>
</html>